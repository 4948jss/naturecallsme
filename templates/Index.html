<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
    <title>카카오 지도 API 테스트페이지</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript"
            src="//dapi.kakao.com/v2/maps/sdk.js?appkey=1868ee8497f900b93026d5face3cb849"></script>

    <script>

        $(document).ready(function () {
            var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
            var options = { //지도를 생성할 때 필요한 기본 옵션
                center: new kakao.maps.LatLng(33.450701, 126.570667), //지도의 중심좌표.
                level: 3 //지도의 레벨(확대, 축소 정도)
            };

            var map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴
        });

        // geolocation API를 사용하여 현재 위치 얻어오기!
        navigator.geolocation.getCurrentPosition(function (position) {
            // 현재 위치의 위도와 경도
            var lat = position.coords.latitude;
            var lng = position.coords.longitude;

            // 지도 표시
            var mapContainer = document.getElementById('map'),
                mapOption = {
                    center: new kakao.maps.LatLng(lat, lng),
                    level: 3
                };

            var map = new kakao.maps.Map(mapContainer, mapOption);

            // 현재 위치에 마커 표시
            var marker = new kakao.maps.Marker({
                position: new kakao.maps.LatLng(lat, lng)
            });
            marker.setMap(map);
        });


        function inputDB() {
            let content = $('#contentInput').val()

            $.ajax({
                type: "POST",
                url: "/naturecallsme",
                data: {content_give: content},
                success: function (response) {
                    alert(response['msg'])
                    window.location.reload()
                }
            })
        }

    </script>

</head>
<body>
테스트페이지!
<div>
    <input type="text" id="contentInput" placeholder="내용">
    <button onclick="inputDB()" type="button">db에 정보 넣기</button>
</div>
<div>
    카카오맵 들어갈자리
    <div id="map" style="width:500px;height:400px;"></div>
</div>



</body>
</html>